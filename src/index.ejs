---
permalink: index.html
eleventyComputed:
  title: '<%= site.title %>'
---

<div x-data="{
    kalenderData: kalender.cleanKalender(),
    abfuhrTypMap: kalender.abfuhrTypMap,
    queryDates: new queryDates(),
  }">
  <h2 class="text-xl font-bold">Abfuhren nach Typ</h2>
  <template x-for="[abfuhrTyp, abfuhrTage] in Object.entries(kalenderData[queryDates.dieserMonat()])">
    <div x-data="{ alleZeigen: false }"
         class="p-5 mt-2" :class="'bg-' + abfuhrTypMap[abfuhrTyp] + '-400'">
      <h3 class="font-bold" x-text="abfuhrTyp"></h3>
      <div class="flex flex-col-reverse">
        <label class="mt-2.5">
          <input type="checkbox"
                 x-bind:checked="alleZeigen"
                 x-on:change="alleZeigen = !alleZeigen">
          <span x-text="alleZeigen ? 'Vergangene Termine nicht anzeigen' : 'Vergangene Termine anzeigen'"></span>
        </label>
        <template x-for="abfuhr in abfuhrTage">
          <div>
            <template x-for="[tag, bezirke] in Object.entries(abfuhr)">
              <div x-data="{
                      thisDate: queryDates.newDateFromDayAndMonth(tag, queryDates.dieserMonat())
                    }">
                <div class="mt-1" :class="!((thisDate > new Date()) || alleZeigen) ? 'hidden' : ''">
                  <time x-text="queryDates.formatDate(thisDate, 'dd.MM.')"></time>
                  <span x-text="bezirke.length > 1 ? 'in Bezirken: ' : 'in Bezirk: '"></span>
                  <template x-for="bezirk in bezirke">
                    <span class="inline-block w-8 py-0.25 px-2 bg-gray-700 text-center text-white rounded" x-text="bezirk"></span>
                  </template>
                </div>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>
  </template>
</div>
